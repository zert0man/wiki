#Cheat list jQuery

Использовать jQuery можно тогда, когда библиотека загружена в браузер. Чтобы все скрипты и объекты были гарантированно загружены, обычно действия скриптов вешают на событие `load` документа:

```
$(document).ready(function(){

	/* Здесь пишем код */
	
})
``` 

### Небольшое отступление: консоль Java Script в браузере

На этапе изучения JQuery желательно пробовать делать выборки на открытой в браузере html-странице в консоли инструментов разработчика. В большинстве браузеров инструменты разработчика открываются клавишей `F12`. Если вы еще этим не пользуетесь - начинайте прямо сейчас.

Вывод в консоль разработчика во время выполнения javascript можно осуществлять командой

```javascript
console.log(smth);
```

### Как получить доступ к элементу и изменить его оформление/содержимое?

Для получения доступа к элементу, необходимо воспользоваться селектором. Селекторы в JQuery очень похожи на селекторы CSS, хотя имеются и дополнительные возможности. Рассмотрим на примере.

Рассмотрим следующий HTML:

```html
<ul id="nav">
	<li class="nav-item active"></li>
	<li class="nav-item"></li>
	<li class="nav-item"></li>
</ul>
```
Попробуем выбрать элементы, наберем в консоли браузера:
```javascript
$('#nav'); // получаем навигацию по id
$('ul#nav'); // аналогично
$('ul') // получаем все элементы ul на странице
	.filter('#nav'); // находим среди (в коллекции) них nav

$('.nav-item'); // получаем элементы по имени класса
$('#nav .nav-item'); // получаем элементы с классом .nav-item внутри #nav любой вложенности
$('#nav > .nav-item'); // получаем элементы с классом .nav-item внутри #nav непосредственной вложенности
$('#nav').children(); // children берет элементы, непосредственно вложенные в nav
```

Каждый запрос JQuery возвращает обёрнутую коллекцию элементов, предоставляющую методы для манипулирования всей коллекцией.
Начнем же ими манипулировать! Заполним пустые элементы. Для этого применим к ним всем функцию.

```javascript
var titles = ["Главная", "Поиск", "Настройки"]; // Заголовки

$('li.nav-item').each(function(index) { // Параметр index в функции-обработчике не обязателен
	$(this) // this в функции подменен и указывает на обрабатываемый объект
			// однако по умолчанию этот объект не обернут в JQuery, вот и обернули
		.text(titles[index]); // установим соответствующий текст
});
```

В отличие от обычных переменных, имена переменных, содержащих JQuery-коллекцию, договариваются начинать со знака `$` - так код становится читабельнее.

```javascript
var $quitItem = $('<li>') // создадим новый элемент списка
	.addClass('nav-item') // добавим класс
	.text('Выход'); // добавим текст
$('ul#nav').append($quitItem); // добавили элемент в DOM, он будет последним в #nav
// может понадобиться prepend, он добавляет элемент в начало родительского элемента

$('<a>') // создадим ссылку на наш чит-лист
	// имя атрибута, затем его значение
	// в html будет выглядеть <a href="https://github.com/mesdt/course/wiki/Cheat-list-jQuery/"></a>
	.attr('href', 'https://github.com/mesdt/course/wiki/Cheat-list-jQuery/')
	.html($('<button>').text('Чит-лист')) // добавим кнопочку с текстом
	.appendTo($('body')); // поместим в конец body
```

Стилизуем полученное:

```javascript
$('body').css('font', ' 14px Helvetica, Arial, sans-serif'); // передаём название свойства и значение

$('ul#nav').css('list-style', 'none'); // отключим отображение элементов как списка

$('.nav-item').css({ // передаём объект с названиями свойств и их значениями
	'cursor' : 'pointer', // поинтер при наведении
	'display' : 'inline-block', // выстроим их в линию
	'padding' : '10px', // поля
	'margin' : '0 3px', // отступы по сторонам
	'color' : '#fff', // цвет текста
	'background' : '#b9c6f2', // цвет фона
	'border-radius' : '6px', // закругления, куда же без них!
	'border' : '2px outset #b9c6f2' // элементы выпирают как кнопки
});

$('.nav-item.active').css('border-style', 'solid'); // активный сплюснут
```

На данном этапе можно проинспектировать элементы средствами разработчика. Обратите внимание, что JQuery изменяет так называемые внутренние стили элементов, т.е. изменяет их атрибут `style`. Стилизацию элементов редко производят лишь средствами JQuery, зачастую у элементов просто добавляют и удаляют классы, меняя их отображение. В частности, в нашем случае, выполняя стилизацию исключительно при помощи JQuery, мы вынуждаем себя каждый раз при смене "активного" элемента навигации не только менять классы, но и их атрибут `style`, т.к. он не будет изменяться автоматически при подмене классов (намного проще написать одно правило для `.active` и просто добавлять и убирать класс).

### Как создать и прикрепить обработчик события?

**Обработчик события** - функция, которая вызывается, когда происходит какое-то событие. 

Обработчики событий прикрепляются ко всем элементам текущей коллекции. Обработчики прикрепляют методом [on()](https://api.jquery.com/on/), например:

```javascript
//Хорошая практика - запоминать результаты запроса, чтобы не повторять его каждый раз без необходимости
$navItems = $('.nav-item');

//Будем менять активный элемент
$navItems.on('click', function(event) {
	$navItems
		.removeClass('active') // удалим у всех элеменов класс active
		.css('border-style', 'outset'); // зададим стиль неактивных
	var text = $(this)
		.addClass('active') // выделим активный элемент
		.css('border-style', 'solid') // добавим стиль активного
		.text(); // вернем текст

	console.log(text); // выведем в консоль текст элемента, на который нажали
});
```

`on()` принимает следующие параметры:
* имена обрабатываемых событий, перечисленные через пробел.
* строка-селектор. Когда метод применяется к коллекции, его можно опустить.
* функция-обработчик события. Она может принимать параметр event, содержащий информацию о событии. В частности, при помощи этого параметра можно отменять поведение по-умолчанию. Например, в своём обработчике нажатия клавиш в поле ввода отменить автоматическую отправку формы при нажатии клавиши Enter:
	
	```javascript
	$('input.name').on('keypress', function(event)) {
		if (event.which == 13) event.preventDefault(); // отмена поведения по умолчанию
			...
	}
	```
	
В JQuery имеются методы-обертки над `on()`, называющиеся в соответствии со своими событиями, такие как `load`, `resize`, `scroll`, `click`, `dblclick`, `mousedown`, `mouseup`, `mousemove`, `mouseover`, `mouseout`, `mouseenter`, `mouseleave`, `change`, `select`, `submit`, `keydown`, `keypress`, `keyup`. Эти методы вызывают метод `on()` с соответствующей строкой в качестве имени события.

### Как использовать AJAX?

В обработчике события, инициирующего запрос, напишем следующий код:

```javascript
$navItems.on('click', function(event) { // обработчик события
	
	...// подготовка параметров для передачи
	
	$.ajax({
		type: "PUT", // тип запроса (GET, PUT, etc...)
		url: "/myurl/", // адрес запроса
		data: { name: name } // параметры (для PUT)
	})
	.done(function( data ) {
		
		// этот код выполнится
		// после получения ответа 
		// на запрос
		
	});	
});
```