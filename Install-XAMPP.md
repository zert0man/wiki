# Установка серверов XAMPP

## Ссылки для скачивания
- XAMPP [http://www.apachefriends.org/index.html](http://www.apachefriends.org/index.html)

## Краткая справка
Полный пакет содержит:
-    Web-сервер Apache с поддержкой SSL;
-    СУБД MySQL;
-    PHP (интерпретатор);
-    Perl (интерпретатор);
-    FTP-сервер FileZilla (файловый сервер);
-    POP3/SMTP сервер (почтовый сервер. может быть заменен на заглушку sendmail);
-    TomCat сервер (сервер запуска java-сервлетов);
-    утилиту phpMyAdmin (администратор СУБД MySQL на PHP).

XAMPP свободно распространяется согласно лицензии GNU General Public License и является бесплатным web-сервером, способным обслуживать динамические страницы. 

Ядро Apache включает в себя основные функциональные возможности, такие как обработка конфигурационных файлов, протокол HTTP и система загрузки модулей. Ядро (в отличие от модулей) полностью разрабатывается Apache Software Foundation, без участия сторонних программистов.
Теоретически, ядро apache может функционировать в чистом виде, без использования модулей. Однако, функциональность такого решения крайне ограничена.

Система конфигурации Apache основана на текстовых конфигурационных файлах. Имеет три условных уровня конфигурации.
	-     Конфигурация сервера (`httpd.conf`).
	-     Конфигурация виртуального хоста (`httpd.conf` c версии 2.2, `extra/httpd-vhosts.conf`).
	-     Конфигурация уровня директории (`.htaccess`).

Apache имеет собственный язык конфигурационных файлов, основанный на блоках директив. Практически все параметры ядра могут быть изменены через конфигурационные файлы. Большая часть модулей имеет собственные параметры. Часть модулей использует в своей работе конфигурационные файлы операционной системы (например \texttt{/etc/passwd} и \texttt{/etc/hosts}). Помимо этого, параметры могут быть заданы через ключи командной строки.

## Установка
1. 	 Скачать и распаковать пакет XAMPP. При установки отключайте анивирус.
1. 	 Запустить панель управления xampp-control.exe, стартовать сервер Apache и MySQL. Запускать сервера необходимо с административными правами и в доверенной зоне антивирусного ПО. Сервер Apache занимает порт 80 и 8080, и может вступать в конфликт с другим ПО, например, Skype. В случае возникновения проблем используйте навыки поиска в интернете для решения проблемы перед тем, как обратиться к преподавателю. Если преподаватель за один поисковый запрос может решить вашу проблему, вы будете жестоко затроллены.  
1. 	 Сконфигурировать Apache. В xampp изначально закрыты права доступа к ресурсам. Зайдите в файл `xampp\apache\conf\extra\httpd-xampp.conf` и исправьте блок в самом конце файла:
	
	```
	<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
		Require local
		ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
	</LocationMatch>
	``` 
	
1. 	 Сконфигурировать хост-файл для Apache. Зайдите в файл `xampp\apache\conf\extra\httpd-vhosts.conf` (здесь хранится конфигурация сайтов, о ней будет ниже) и добавьте конфигурацию для инструментов xampp:
	
	```
	<VirtualHost *:80>
		DocumentRoot "C:/WORK/xampp/htdocs"
		ServerName localhost
	</VirtualHost>
	``` 
	
1. 	 Убедиться, что всё заработало, зайдя в браузере `http://localhost/`. Зайдите по ссылке phpMyAdmin, чтобы убедиться в работе MySQL.
1. 	 Установить уровень отображения ошибок для PHP.	Изначально XAMPP сконфигурирован для разработчика, т.е. в браузере будут отображаться не только критические ошибки PHP, но и различного рода предупреждения, например, "Strict Standards: ...", "Notice: ..." и другие. Для изменения уровня отображения ошибок PHP нужно открыть файл `C:/xampp/php/php.ini` в любом редакторе и в нем поставить значение: `error_reporting = E_ALL`. При этом значении будут отображаться только критические ошибки PHP. После внесения изменений в файл конфигурации PHP (`php.ini`) так же нужно перезагружать сервер Apache. В контрольной панели XAMPP напротив "Apache" нажать кнопку "Stop", если сервис уже запущен, дальше после остановки нажать кнопку "Start".


## Конфигурирование домена
1. 	 Создать в любом месте на диске, где вам удобнее, папку для нового проекта (для примера будет использоваться название `MyDir`). Создать внутри папки `MyDir` папки `web` для содержимого сайта и `logs` для хранения логов.
1. 	 Создать в папке `web файл `index.htm` с тектсом `Hello, world!`.
1.    Перейти в файл `xampp/apache/conf/extra/httpd-vhosts.conf}, отвечающий за настройку виртуальных хостов. Открыть файл в любом текстовом редакторе и добавить новый хост `mysite.local` (это доменное имя сайта, как `yandex.ru`):
	```
	<VirtualHost *:80>
		ServerAdmin myaddress@mysite.local
		DocumentRoot "c:/full/path/to/MyDir/web"
		ServerName mysite.local
		ServerAlias www.mysite.local
		ErrorLog "c:/full/path/to/MyDir/logs/error.log"
		CustomLog "c:/full/path/to/MyDir/logs/access.log" combined
	  <Directory "c:/full/path/to/MyDir/web">
		  AllowOverride All
		  Order allow,deny
		  Allow from all
			Require all granted 
	  </Directory>
	</VirtualHost>
	```
1.   Перезапустить Apache. Добавить в файл `c:/Windows/System32/drivers/etc/hosts` строки:
		```
			 127.0.0.1     mysite.local
			 127.0.0.1     www.mysite.local
		```
1. Убедиться, что сайт `mysite.local` заработал.