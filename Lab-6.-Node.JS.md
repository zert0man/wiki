# Лабораторная работа 6. Node.JS

## Цели и задачи

**Цель работы:** освоить основы работы с фреймворком Node.js.

**Задача работы:** разработать приложение на Node.js, реализующее CRUD объектов из базы данных MongoDB. 

## Краткие теоретические сведения

**Node.js** - программная платформа, основанная на движке V8, превращающая JavaScript из узко специализированного языка в язык общего назначения. **V8 JavaScript Engine** - движок JavaScript, используемый в браузере Chrome. В основе Node.js лежит событийно-ориентированное и асинхронное (или реактивное) программирование с неблокирующим вводом/выводом.

За установку модулей в Node.js отвечает установщик пакетов npm (node package manager).

Для выполнения лабораторной работы потребуются следующии плагины Node.js.
- [Express](http://expressjs.com/) - web-фреймворк для работы с маршрутизацией.
- [Path](https://nodejs.org/api/path.html) - модуль для обработки путей, в частности, для подключения статических ресурсов.
- Шаблонизатор на выбор:
	- [Swig](http://paularmstrong.github.io/swig/);
	- [Jade](http://jade-lang.com/).
- [Mongoose](http://mongoosejs.com/docs/guide.html) - ODM

Подробнее про эти модули вы можете прочитать в документации.

## Порядок работы

Пример простейшего приложения с комментариями вы можете найти в репозитории [hw5_simple](https://github.com/mesdt/hw5_simple). Для более подробного изучения посмотрите репозиторий
[hw5](https://github.com/mesdt/hw5).

1. Если вы не используете виртуальную машину mesdt, [скачайте](http://nodejs.org/download) и установите Node.js. После установки обязательно перезагрузитесь.
1. Создайте папку для будущего приложения: 
	
	```
      mkdir lab5 
      cd lab5
    ```
1. Создайте конфигурационный файл.
    Он должен называться `package.json` и содержать в себе следующие строки:

    ```javascript
	{
	  "name": "hw6",
	  "version": "0.0.1",
	  "description": "Mesdt hw6 example",
	  "dependencies": {
		"express": "4.12.3",
		"mongodb": "2.0.27",
		"mongoose": "3.8.x",
		"swig": "1.4.2",
		"cookie-parser": "1.3.4",
		"body-parser": "1.12.2"
	  },
	  "author": "Varvara Krayvanova <krayvanova@gmail.com>",
	  "license": "MIT"
	}
	```
    
    Обратите внимание на версию \code{express} в секции \code{dependencies:} желательно, во избежание сюрпризов в будущем, указывать конкретную версию фреймворка. Актуальный номер версии в репозитории можно узнать с помощью команды

    ```
       npm info express version
    ```

1. Установите необходимые модули командой:
    
	```
       npm install
    ```
	
	Для выполнения команды необходимо соединение с интернетом. После выполнения команды появится каталог `./node_modules`, содержащий все зависимости проекта. Их также можно посмотреть с помощью команды `npm ls`.

1. Создайте и каталог с представлениями `views`, а также папку для статических ресурсов, например, `public`. 

    ```
      mkdir views
      mkdir public
    ```
	
1. Создайте главный файл приложения \code{app.js}, а также шаблоны с использованием выбранного шаблонизатора.  

1. Запуск приложения выполняется следующей командой:

	```
	  node app.js
	```

	Запускается процесс-демон, который будет слушать указанный вами порт. Не закрывайте консоль, иначе сервер отключится. Если что-то пошло не так, вы увидите ошибки в консоли. После исправления ошибок сервер надо перезапустить. Остановить сервер можно нажатием Ctrl+C.
	
** Примечание: ** перед запуском убедитесь, что сервер mongodb запущен, и вы прописали правильную конфигурацию.	

## Дополнительно
Любой дополнительный функционал будет в плюс.

## Защита лабораторной работы
На защите лабораторной работы студент должен продемонстрировать работающее приложение, в котором можно просматривать, добавлять и удалять записи. Редактирование, так и быть, можете не делать.

##Дополнительная литература
- [Учебник для начинающих по Node.js](http://nodebeginner.ru/)
- [Интерактивный учебник продвинутого уровня Node.js](http://nodeschool.io/)
- [Репозиторий и пакетный менеджер NPM](https://www.npmjs.org/)
- [Документация по Node.js](http://nodejs.org/api/)
- [Express](http://expressjs.com/) 
- [Path](https://nodejs.org/api/path.html) 
- [Swig](http://paularmstrong.github.io/swig/);
- [Jade](http://jade-lang.com/).
- [Mongoose](http://mongoosejs.com/docs/guide.html)